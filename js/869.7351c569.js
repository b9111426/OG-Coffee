"use strict";(self["webpackChunkog_coffee"]=self["webpackChunkog_coffee"]||[]).push([[869],{183:function(e,t,a){a.d(t,{Z:function(){return h}});var s=a(6252);const l=e=>((0,s.dD)("data-v-64356d4b"),e=e(),(0,s.Cn)(),e),i={class:"input-group flex-nowrap"},o=l((()=>(0,s._)("i",{class:"bi bi-dash"},null,-1))),r=[o],d=["value"],n=l((()=>(0,s._)("i",{class:"bi bi-plus"},null,-1))),c=[n];function u(e,t,a,l,o,n){return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("button",{class:"btn btn-gray",type:"button",id:"button-addon1",onClick:t[0]||(t[0]=t=>e.$emit("min"))},r),(0,s._)("input",{type:"number",value:a.val,onkeydown:"return event.keyCode !== 69",onInput:t[1]||(t[1]=e=>n.pushVal(e)),class:"form-control text-center hide-input-number-spinner","aria-label":"Example text with button addon","aria-describedby":"button-addon1"},null,40,d),(0,s._)("button",{class:"btn btn-gray",type:"button",id:"button-addon1",onClick:t[2]||(t[2]=t=>e.$emit("add"))},c)])}var p={props:["val"],emits:["add","min","push-val"],methods:{pushVal(e){let t=parseInt(e.target.value);t>999&&(t=999,e.target.value=999),this.$emit("push-val",t)}}},m=a(3744);const v=(0,m.Z)(p,[["render",u],["__scopeId","data-v-64356d4b"]]);var h=v},1085:function(e,t,a){a.d(t,{Z:function(){return _}});var s=a(6252),l=a(3577);const i={id:"delProductModal",ref:"modal",class:"modal scale-in-center",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},o={class:"modal-dialog modal-dialog-centered"},r={class:"modal-content border-0"},d={class:"modal-header bg-danger text-white"},n={id:"delProductModalLabel",class:"modal-title"},c={class:"modal-body"},u={class:"text-danger"},p={class:"modal-footer"},m=(0,s._)("button",{type:"button",class:"btn btn-outline-primary","data-bs-dismiss":"modal"}," 取消 ",-1);function v(e,t,a,v,h,f){return(0,s.wg)(),(0,s.iD)("div",i,[(0,s._)("div",o,[(0,s._)("div",r,[(0,s._)("div",d,[(0,s._)("h5",n,[(0,s._)("span",null,"刪除"+(0,l.zw)(a.title),1)]),(0,s._)("button",{type:"button",class:"btn-close bg-gray me-1","data-bs-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=(...t)=>e.handClass&&e.handClass(...t))})]),(0,s._)("div",c,[(0,s.Uk)(" 是否刪除 "),(0,s._)("strong",u,(0,l.zw)(a.item.title),1),(0,s.Uk)(" "+(0,l.zw)(a.title)+"(刪除後將無法恢復)。 ",1)]),(0,s._)("div",p,[m,(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=t=>e.$emit("del-item",this.item.title))}," 確認刪除 ")])])])],512)}var h=a(1339),f={props:{item:Object,title:String},mixins:[h.Z],emits:["del-item"]},b=a(3744);const g=(0,b.Z)(f,[["render",v]]);var _=g},3869:function(e,t,a){a.r(t),a.d(t,{default:function(){return Le}});var s=a(6252),l=a(3577),i=a(9963),o=a(7923);const r=e=>((0,s.dD)("data-v-0df49487"),e=e(),(0,s.Cn)(),e),d={class:"row mb-3"},n={class:"col-12"},c={class:"card"},u={class:"card-header d-flex py-3"},p={key:0,class:"ms-auto"},m=r((()=>(0,s._)("img",{class:"loading",src:o,alt:""},null,-1))),v=[m],h={class:"card-body"},f=(0,s.uE)('<div class="row border-bottom d-none d-lg-flex" data-v-0df49487><div class="col-3 fw-bold text-nowrap py-2" data-v-0df49487>商品資料</div><div class="col-2 fw-bold text-nowrap py-2" data-v-0df49487>優惠卷</div><div class="col-2 fw-bold text-nowrap py-2" data-v-0df49487>單件價格</div><div class="col-2 fw-bold text-nowrap py-2" data-v-0df49487>數量</div><div class="col-2 fw-bold text-nowrap py-2" data-v-0df49487>小計</div><div class="col-1 fw-bold text-nowrap py-2" data-v-0df49487></div></div>',1),b={class:"order-0 order-lg-0 col-lg-3 col-10 d-flex py-2"},g={class:"pre-pic img-thumbnail",alt:"縮圖"},_={class:"ms-1 text-start"},y={class:"text-break"},w={class:"text-break"},k={class:"order-2 order-lg-1 col-8 col-lg-2 text-nowrap py-2"},x={key:0},D={class:"border border-primary text-black p-2 rounded-3 d-flex justify-content-center flex-wrap"},C=r((()=>(0,s._)("span",null,"優惠卷:",-1))),$={class:"ms-2"},T={class:"order-3 order-lg-2 col-4 col-lg-2 text-nowrap py-2"},P={class:"order-4 order-lg-3 col-8 col-lg-2 text-nowrap py-2"},L={class:"order-5 order-lg-4 col-4 col-lg-2 text-nowrap py-2"},S={class:"order-1 order-lg-5 col-2 col-lg-1 text-nowrap"},M=["onClick"],V=r((()=>(0,s._)("i",{class:"bi bi-x"},null,-1))),z=[V],U={class:"mt-3 py-3",id:"emptyCart",ref:"emptyCart"},q=r((()=>(0,s._)("span",{class:"h3 text-gray-dark"},"購物車無任何商品",-1))),R=[q],F={class:"d-flex align-items-center mt-2 flex-wrap"},H=r((()=>(0,s._)("i",{class:"bi bi-chevron-double-right me-1"},null,-1))),I={class:"row"},W={class:"col-lg-8 col-12 mb-3"},Z={class:"card mb-3"},A=r((()=>(0,s._)("div",{class:"card-header"},"用餐選項",-1))),G={class:"card-body"},E={class:"form-check d-inline-block"},N=r((()=>(0,s._)("label",{class:"form-check-label",for:"forHere"}," 內用 ",-1))),j={class:"form-check d-inline-block ms-3"},Y=r((()=>(0,s._)("label",{class:"form-check-label",for:"toGo"}," 外送 ",-1))),K={class:"card mb-3"},O=r((()=>(0,s._)("div",{class:"card-header"},"外送時間",-1))),B={class:"card-body d-flex flex-column"},Q={class:"form-check"},J=r((()=>(0,s._)("label",{class:"form-check-label float-start",for:"orderNow"}," 現在訂餐 ",-1))),X={class:"form-check mb-3"},ee=r((()=>(0,s._)("label",{class:"form-check-label float-start text-start",for:"orderLater"}," 預約訂餐 (指定送達時間至少2個小時前至7天內訂餐)(外送時間:am9:00~pm9:30) ",-1))),te={class:"d-flex align-items-baseline"},ae=r((()=>(0,s._)("label",{class:"form-label text-nowrap me-2",for:"orderDate"}," 日期： ",-1))),se=r((()=>(0,s._)("option",{value:"",disabled:"",selected:"",class:"text-gray"}," 請選擇您的外送日期 ",-1))),le=["value"],ie={class:"d-flex align-items-baseline"},oe=r((()=>(0,s._)("label",{class:"form-label text-nowrap me-2",for:"orderTime"}," 時間： ",-1))),re=r((()=>(0,s._)("option",{value:"",disabled:"",selected:"",class:"text-gray"}," 請選擇您的外送時間 ",-1))),de=["value"],ne={class:"col-lg-4 col-12"},ce={class:"card"},ue=r((()=>(0,s._)("div",{class:"card-header"},"訂單資訊",-1))),pe={class:"card-body"},me={class:"mb-2 d-flex"},ve=r((()=>(0,s._)("span",{class:"me-auto"},"小結:",-1))),he={key:0,class:"mb-2 d-flex"},fe=r((()=>(0,s._)("span",{class:"me-auto"},"外送費:",-1))),be={class:"mb-4 d-flex align-items-center"},ge=r((()=>(0,s._)("strong",{class:"me-auto"},"總計:",-1))),_e={class:"h4"},ye=r((()=>(0,s._)("button",{href:"javascript:;",type:"submit",class:"btn btn-success w-100"}," 前往結帳 ",-1)));function we(e,t,a,o,r,m){const V=(0,s.up)("AddMinBtn"),q=(0,s.up)("router-link"),we=(0,s.up)("v-field"),ke=(0,s.up)("error-message"),xe=(0,s.up)("v-form"),De=(0,s.up)("DelModal"),Ce=(0,s.Q2)("src"),$e=(0,s.Q2)("num");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",d,[(0,s._)("div",n,[(0,s._)("div",c,[(0,s._)("div",u,[(0,s._)("h4",null,"產品總數: ( "+(0,l.zw)(m.cartData.length)+"件 )",1),r.isLoading?((0,s.wg)(),(0,s.iD)("div",p,v)):(0,s.kq)("",!0)]),(0,s._)("div",h,[f,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.cartData,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"row border-bottom px-2 py-3 product-item",key:e.id},[(0,s._)("div",b,[(0,s.wy)((0,s._)("img",g,null,512),[[Ce,[e.product.imageUrl]]]),(0,s._)("div",_,[(0,s._)("p",y,(0,l.zw)(e.product.title),1),(0,s._)("p",w,(0,l.zw)(e.product.category),1)])]),(0,s._)("div",k,[e.coupon?((0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("div",D,[C,(0,s._)("span",$,(0,l.zw)(e.coupon?.title),1)])])):(0,s.kq)("",!0)]),(0,s._)("div",T,[(0,s.wy)((0,s._)("p",null,null,512),[[$e,e.product.price]])]),(0,s._)("div",P,[(0,s.Wm)(V,{val:e.qty,onAdd:t=>m.modify(e.id,e.product_id,e.qty,"add"),onMin:t=>m.modify(e.id,e.product_id,e.qty,"min"),onPushVal:t=>m.pushVal(t,e.id,e.product_id)},null,8,["val","onAdd","onMin","onPushVal"])]),(0,s._)("div",L,[(0,s.wy)((0,s._)("p",null,null,512),[[$e,e.final_total]])]),(0,s._)("div",S,[(0,s._)("button",{type:"button",class:"btn btn-outline-danger btn-sm m-2",onClick:t=>m.openDelModal(e.product.title,e.id)},z,8,M)])])))),128)),(0,s.wy)((0,s._)("div",U,R,512),[[i.F8,0===m.cartData.length]]),(0,s._)("div",F,[(0,s.Wm)(q,{to:"/products",class:"ms-auto fs-5 me-2 text-nowrap"},{default:(0,s.w5)((()=>[H,(0,s.Uk)(" 繼續購物")])),_:1})])])])])]),(0,s.Wm)(xe,{onSubmit:m.onSubmit},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",I,[(0,s._)("div",W,[(0,s._)("div",Z,[A,(0,s._)("div",G,[(0,s._)("div",E,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",id:"forHere",value:"","onUpdate:modelValue":t[0]||(t[0]=e=>r.isTogo=e)},null,512),[[i.G2,r.isTogo]]),N]),(0,s._)("div",j,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",id:"toGo",value:"toGo","onUpdate:modelValue":t[1]||(t[1]=e=>r.isTogo=e)},null,512),[[i.G2,r.isTogo]]),Y])])]),(0,s.wy)((0,s._)("div",K,[O,(0,s._)("div",B,[(0,s._)("div",Q,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",id:"orderNow",value:"","onUpdate:modelValue":t[2]||(t[2]=e=>r.isReserve=e)},null,512),[[i.G2,r.isReserve]]),J]),(0,s._)("div",X,[(0,s.wy)((0,s._)("input",{class:"form-check-input",type:"radio",id:"orderLater",value:"reserve","onUpdate:modelValue":t[3]||(t[3]=e=>r.isReserve=e)},null,512),[[i.G2,r.isReserve]]),ee]),(0,s.wy)((0,s._)("div",null,[(0,s._)("div",te,[ae,(0,s.Wm)(we,{class:(0,l.C_)(["form-select mb-3 w-50 flex-shrink-0",{"is-invalid":e["預約訂餐日期"]}]),id:"orderDate",name:"預約訂餐日期",rules:{required:""!==r.isReserve},as:"select",modelValue:r.reserveSelectDate,"onUpdate:modelValue":t[4]||(t[4]=e=>r.reserveSelectDate=e)},{default:(0,s.w5)((()=>[se,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.reserveDate,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,l.zw)(e),9,le)))),128))])),_:2},1032,["rules","modelValue","class"]),(0,s.Wm)(ke,{name:"預約訂餐日期",class:"invalid-feedback"})]),(0,s._)("div",ie,[oe,(0,s.Wm)(we,{class:(0,l.C_)(["form-select w-50 flex-shrink-0",{"is-invalid":e["預約訂餐時間"]}]),id:"orderTime",rules:{required:""!==r.isReserve},as:"select",name:"預約訂餐時間",modelValue:r.reserveSelectTime,"onUpdate:modelValue":t[5]||(t[5]=e=>r.reserveSelectTime=e),onmousedown:"if(this.options.length>6){this.size=7}",onblur:"this.size=0",onchange:"this.size=0"},{default:(0,s.w5)((()=>[re,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(m.reserveTime,(e=>((0,s.wg)(),(0,s.iD)("option",{key:e,value:e},(0,l.zw)(e),9,de)))),128))])),_:2},1032,["rules","modelValue","class"]),(0,s.Wm)(ke,{name:"預約訂餐時間",class:"invalid-feedback"})])],512),[[i.F8,r.isReserve]])])],512),[[i.F8,r.isTogo]])]),(0,s._)("div",ne,[(0,s._)("div",ce,[ue,(0,s._)("div",pe,[(0,s._)("div",me,[ve,(0,s._)("span",null,[(0,s.Uk)("NT$ "),(0,s.wy)((0,s._)("span",null,null,512),[[$e,m.totalPrice]])])]),r.isTogo?((0,s.wg)(),(0,s.iD)("div",he,[fe,(0,s._)("span",null,"NT$ "+(0,l.zw)(m.deliveryFee),1)])):(0,s.kq)("",!0),(0,s._)("div",be,[ge,(0,s._)("strong",_e,[(0,s.Uk)("NT$ "),(0,s.wy)((0,s._)("span",null,null,512),[[$e,m.finalPrice]])])]),ye])])])])])),_:1},8,["onSubmit"]),(0,s.Wm)(De,{item:r.tempProduct,ref:"delModal",onDelItem:m.delCartProduct},null,8,["item","onDelItem"])],64)}a(7658);var ke=a(6486),xe=a.n(ke),De=a(1085),Ce=a(183),$e={emits:["setProgress"],data(){return{isLoadingItem:"",tempProduct:{},isLoading:!1,isTogo:"",isReserve:"",reserveDate:[],reserveSelectDate:"",reserveSelectTime:""}},components:{DelModal:De.Z,AddMinBtn:Ce.Z},methods:{modify:xe().debounce((async function(e,t,a,s){if(this.isLoading=!0,"add"===s?a++:a--,a<=1)a=1;else if(a>999)return a=999,void(this.isLoading=!1);const l={id:e,data:{product_id:t,qty:a}};try{await this.$store.dispatch("Cart/modifyCart",l),await this.$store.dispatch("Cart/getCart"),this.isLoading=!1}catch(i){throw new Error(i)}}),500),pushVal:xe().debounce((async function(e,t,a){this.isLoading=!0;const s={id:t,data:{product_id:a,qty:e}};try{await this.$store.dispatch("Cart/modifyCart",s),await this.$store.dispatch("Cart/getCart"),this.isLoading=!1}catch(l){throw new Error(l)}}),500),openDelModal(e,t){this.tempProduct.title=e,this.tempProduct.id=t;const a=this.$refs.delModal;a.openModal()},async getCart(){try{await this.$store.dispatch("Cart/getCart"),this.$store.dispatch("handLoading",!1)}catch(e){throw new Error(e)}},delCartProduct:xe().debounce((async function(e){try{await this.$store.dispatch("Cart/deleteCart",this.tempProduct.id);const t=this.$refs.delModal;t.hideModal(),this.$store.dispatch("fireToast",{title:`${e}已刪除`,style:"success"}),this.getCart()}catch(t){this.$store.dispatch("fireToast",{res:t.response})}}),500),createLottie(){const e=this.lottie.loadAnimation({container:this.$refs.emptyCart,animType:"svg",loop:!0,path:"https://lottie.host/d6b9ff64-e007-4565-999e-ce83c26d82f9/LueoasihD3.json"});e.setSpeed(1)},onSubmit:xe().debounce((function(){if(0===this.cartData.length)return void this.$store.dispatch("fireToast",{title:"購物車無商品",style:"danger"});this.$emit("setProgress",1);const e={isTogo:this.isTogo,isReserve:this.isReserve,reserveSelectDate:this.reserveSelectDate,reserveSelectTime:this.reserveSelectTime,finalPrice:this.finalPrice,deliveryFee:this.deliveryFee,totalPrice:this.totalPrice};this.$store.dispatch("Orders/sendOrderInfo",e),this.$router.push("/cart/checkout")}),500),handDateAry(){let e=0;const t=(new Date).getHours();t>19&&(e=1);for(let a=e;a<e+7;a++){let e=(new Date).getTime(),t=new Date(e+864e5*a).toLocaleDateString();this.reserveDate.push(t)}}},mounted(){this.createLottie()},created(){this.handDateAry(),this.getCart(),this.$store.dispatch("handLoading",!0)},computed:{cartData(){return this.$store.getters["Cart/getCart"]},totalPrice(){return this.$store.getters["Cart/finalTotal"]},finalPrice(){return this.totalPrice+this.deliveryFee},reserveTime(){let e=[],t=9;const a=(new Date).getHours();let s=t+(a-t)+2;const l=a-t+2,i=(new Date).toLocaleDateString();if(this.reserveSelectDate===i)for(let o=0;o<13-l;o++)e.push(`${s+o}:00`),e.push(`${s+o}:30`);else for(let o=0;o<13;o++)e.push(`${t+o}:00`),e.push(`${t+o}:30`);return e},deliveryFee(){return this.isTogo?50:0}}},Te=a(3744);const Pe=(0,Te.Z)($e,[["render",we],["__scopeId","data-v-0df49487"]]);var Le=Pe},7923:function(e,t,a){e.exports=a.p+"img/load.c8fc3381.gif"}}]);
//# sourceMappingURL=869.7351c569.js.map