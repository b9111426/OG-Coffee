"use strict";(self["webpackChunkog_coffee"]=self["webpackChunkog_coffee"]||[]).push([[568],{9103:function(t,e,a){a.d(e,{Z:function(){return w}});var s=a(6252),i=a(9963),r=a(3577);const o={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center align-items-center"},c=["disabled"],d=["onClick"],l={key:0,class:"page-item disabled mx-1"},p=(0,s._)("a",{href:"#",class:"bg-gray text-white page-link rounded-1"},"1",-1),u=[p],g=["disabled"];function h(t,e,a,p,h,b){return(0,s.wg)(),(0,s.iD)("nav",o,[(0,s._)("ul",n,[(0,s._)("li",null,[(0,s._)("button",{type:"button",class:"btn text-primary bg-transparent border-0",disabled:!a.pages.has_pre,onClick:e[0]||(e[0]=(0,i.iM)((t=>b.updatePage(a.pages.current_page-1)),["prevent"]))},[(0,s._)("i",{class:(0,r.C_)(["bi bi-chevron-double-left fs-5",{"text-white opacity-75":!a.pages.has_pre}])},null,2)],8,c)]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(b.pageAry,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,r.C_)(["page-item mx-1",{active:t===a.pages.current_page}]),key:t+"452"},[(0,s._)("a",{class:"page-link rounded-1",href:"#",onClick:(0,i.iM)((e=>b.updatePage(t)),["prevent"])},(0,r.zw)(t),9,d)],2)))),128)),a.pages.current_page?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",l,u)),(0,s._)("li",null,[(0,s._)("button",{type:"button",class:"btn text-primary bg-transparent border-0",disabled:!a.pages.has_next,onClick:e[1]||(e[1]=(0,i.iM)((t=>b.updatePage(a.pages.current_page+1)),["prevent"]))},[(0,s._)("i",{class:(0,r.C_)(["bi bi-chevron-double-right fs-5",{"text-white opacity-75":!a.pages.has_next}])},null,2)],8,g)])])])}a(7658);var b={props:["pages"],methods:{updatePage(t){"search"===this.pages.category?this.$emit("searchPages",t):this.$emit("emitPages",t,this.pages.category)}},computed:{pageAry(){const t=Math.abs(9*(Math.ceil(this.pages.current_page/9)-1)+1),e=[];for(let a=t;a<this.pages.total_pages+1;a++)e.push(a);return e}}},_=a(3744);const m=(0,_.Z)(b,[["render",h]]);var w=m},1568:function(t,e,a){a.r(e),a.d(e,{default:function(){return q}});var s=a(6252),i=a(3577);const r=t=>((0,s.dD)("data-v-778b9ec5"),t=t(),(0,s.Cn)(),t),o={class:"contain-fluid pb-5"},n={class:"row"},c={class:"card h-100"},d=["onClick"],l={class:"position-relative d-inline-block overflow-hidden"},p={key:0,class:"position-absolute sellOutTag bg-danger start-50 top-50 translate-middle"},u={class:"card-img-top",alt:"..."},g={key:0,class:"position-absolute text-white text-nowrap top-50 start-50 translate-middle"},h={class:"card-body d-flex flex-column p-1 p-lg-3"},b={class:"text-center fs-5"},_={class:"text-center fs-7 fs-lg-5 lh-mm mb-3"},m=["data-id"],w=r((()=>(0,s._)("i",{class:"bi bi-cart-fill fs-5"},null,-1))),f=[w],y={key:0},k={class:"fs-3 text-primary mt-5"};function v(t,e,a,r,w,v){const P=(0,s.up)("Pagination"),C=(0,s.Q2)("src");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",n,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.products,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"col-lg-3 col-md-4 col-6 g-3",key:t.id},[(0,s._)("div",c,[(0,s._)("a",{class:(0,i.C_)(["position-relative",{"card-link":!t.is_soldOut}]),onClick:e=>v.toNewRouter(t.id,t.is_soldOut)},[(0,s._)("div",l,[t.is_soldOut?((0,s.wg)(),(0,s.iD)("div",p)):(0,s.kq)("",!0),(0,s.wy)((0,s._)("img",u,null,512),[[C,void 0===t.imageUrl?"":t.imageUrl[0]]])]),t.is_soldOut?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("p",g," 加入購物車 "))],10,d),(0,s._)("div",h,[(0,s._)("p",b,(0,i.zw)(t.title),1),(0,s._)("p",_,(0,i.zw)(t.subtitle),1),(0,s._)("button",{type:"button",class:"btn btn-sm btn-outline-primary py-0 d-block d-lg-none mt-auto","data-id":t.id,onClick:e[0]||(e[0]=t=>v.addToCart(t))},f,8,m)])])])))),128)),w.isShow?((0,s.wg)(),(0,s.iD)(s.HY,{key:0},[0===v.products.length?((0,s.wg)(),(0,s.iD)("div",y,[(0,s._)("p",k," 找不到您所查詢的「"+(0,i.zw)(v.notFound)+"」相關商品 ",1)])):(0,s.kq)("",!0)],64)):(0,s.kq)("",!0)]),(0,s.Wm)(P,{class:"mt-4",pages:v.pagination,onEmitPages:v.getProducts,onSearchPages:v.handSearchPages},null,8,["pages","onEmitPages","onSearchPages"])])}a(7658);var P=a(9103),C=a(6486),x=a.n(C),$={components:{Pagination:P.Z},data(){return{isShow:!1}},updated(){this.isShow=!0},methods:{toNewRouter(t,e){e||(this.$store.dispatch("Products/setLoading",!0),this.$store.dispatch("Products/setSortState",!1),this.$router.push({path:`products/${t}`}))},async getProducts(t=1,e){try{const a={page:t,category:e};await this.$store.dispatch("Products/getFrontProducts",a)}catch(a){throw new Error(a)}},handSearchPages(t){this.$store.dispatch("Products/setSearchPagination",t)},addToCart:x().debounce((async function(t){const e=t.target.dataset.id,a={product_id:e,qty:1};try{const t=await this.$store.dispatch("Cart/addCart",a),e=t.data.data.product.title;this.$store.dispatch("fireToast",{title:`「${e}」已加入購物車`,style:"success"}),this.$store.dispatch("Cart/getCart"),this.$store.dispatch("Cart/setShake")}catch(s){throw new Error(s)}}),500)},computed:{products(){return this.$store.getters["Products/productsData"]},pagination(){return this.$store.getters["Products/productsPage"]},notFound(){return this.$store.getters["Products/notFound"]}}},D=a(3744);const S=(0,D.Z)($,[["render",v],["__scopeId","data-v-778b9ec5"]]);var q=S}}]);
//# sourceMappingURL=568.a6ff99ae.js.map