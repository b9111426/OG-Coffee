"use strict";(self["webpackChunkog_coffee"]=self["webpackChunkog_coffee"]||[]).push([[633],{183:function(t,s,i){i.d(s,{Z:function(){return b}});var a=i(6252);const r=t=>((0,a.dD)("data-v-64356d4b"),t=t(),(0,a.Cn)(),t),e={class:"input-group flex-nowrap"},o=r((()=>(0,a._)("i",{class:"bi bi-dash"},null,-1))),n=[o],c=["value"],d=r((()=>(0,a._)("i",{class:"bi bi-plus"},null,-1))),l=[d];function u(t,s,i,r,o,d){return(0,a.wg)(),(0,a.iD)("div",e,[(0,a._)("button",{class:"btn btn-gray",type:"button",id:"button-addon1",onClick:s[0]||(s[0]=s=>t.$emit("min"))},n),(0,a._)("input",{type:"number",value:i.val,onkeydown:"return event.keyCode !== 69",onInput:s[1]||(s[1]=t=>d.pushVal(t)),class:"form-control text-center hide-input-number-spinner","aria-label":"Example text with button addon","aria-describedby":"button-addon1"},null,40,c),(0,a._)("button",{class:"btn btn-gray",type:"button",id:"button-addon1",onClick:s[2]||(s[2]=s=>t.$emit("add"))},l)])}var p={props:["val"],emits:["add","min","push-val"],methods:{pushVal(t){let s=parseInt(t.target.value);s>999&&(s=999,t.target.value=999),this.$emit("push-val",s)}}},h=i(3744);const g=(0,h.Z)(p,[["render",u],["__scopeId","data-v-64356d4b"]]);var b=g},4633:function(t,s,i){i.r(s),i.d(s,{default:function(){return Q}});var a=i(6252),r=i(3577),e=i(7923);const o=t=>((0,a.dD)("data-v-0102bee2"),t=t(),(0,a.Cn)(),t),n={class:"container mt-3"},c={class:"row row-cols-lg-2 row-cols-1"},d={class:"col"},l={class:"row mb-2"},u={class:"col"},p={key:0,ref:"pic1",class:"img-fluid img-thumbnail",alt:""},h={class:"row g-3"},g=["src"],b={class:"col my-5 my-lg-0"},m={class:"text-start text-break"},y={class:"text-start text-break mb-lg-5 mb-3"},w={class:"text-start mb-lg-5 mb-3"},v={key:0},f={class:"col-12 d-flex align-items-center mb-3"},k={class:"text-center fs-5 me-auto"},_={class:"ms-auto text-break fs-4"},C={key:0,class:"text-decoration-line-through text-danger text-break me-2"},q={class:"col-12 mb-4"},$={key:0,class:"input-group input-group-sm flex-nowrap"},x={class:"d-flex"},D={class:"col pe-1"},A={key:0,class:"position-absolute top-50 end-0 translate-middle"},P=o((()=>(0,a._)("img",{class:"loading",src:e,alt:""},null,-1))),S=[P],T={class:"col ps-1"};function z(t,s,i,e,o,P){const z=(0,a.up)("AddMinBtn"),V=(0,a.Q2)("src");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",c,[(0,a._)("div",d,[(0,a._)("div",l,[(0,a._)("div",u,[o.isShow?(0,a.wy)(((0,a.wg)(),(0,a.iD)("img",p,null,512)),[[V,[o.product.imageUrl]]]):(0,a.kq)("",!0)])]),(0,a._)("div",h,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.product.imageUrl.splice(1),((t,i)=>((0,a.wg)(),(0,a.iD)("div",{key:t+i,class:"col-4",onClick:s[0]||(s[0]=t=>P.changPic(t))},[(0,a._)("img",{class:"subImg img-fluid img-thumbnail",src:t,alt:""},null,8,g)])))),128))])]),(0,a._)("div",b,[(0,a._)("h3",m,(0,r.zw)(o.product.title),1),(0,a._)("h4",y,(0,r.zw)(o.product.subtitle),1),(0,a._)("p",w,(0,r.zw)(o.product.description),1),o.isShow?((0,a.wg)(),(0,a.iD)("div",v,[(0,a._)("div",f,[(0,a._)("p",k,"單位("+(0,r.zw)(o.unitAry[0])+")",1),(0,a._)("p",_,[o.product.origin_price!==o.product.price?((0,a.wg)(),(0,a.iD)("span",C," NT$"+(0,r.zw)(o.product.origin_price),1)):(0,a.kq)("",!0),(0,a.Uk)(" NT$"+(0,r.zw)(o.product.price),1)])]),(0,a._)("div",q,[o.isShow?((0,a.wg)(),(0,a.iD)("div",$,[(0,a.Wm)(z,{val:o.qty,onAdd:P.add,onMin:P.min,onPushVal:P.pushVal},null,8,["val","onAdd","onMin","onPushVal"])])):(0,a.kq)("",!0)]),(0,a._)("div",x,[(0,a._)("div",D,[o.isShow?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"btn btn-primary w-100 position-relative",onClick:s[1]||(s[1]=(...t)=>P.addToCart&&P.addToCart(...t))},[o.isLoading?((0,a.wg)(),(0,a.iD)("div",A,S)):(0,a.kq)("",!0),(0,a.Uk)(" 加入購物車 ")])):(0,a.kq)("",!0)]),(0,a._)("div",T,[o.isShow?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"btn btn-success w-100",onClick:s[2]||(s[2]=t=>P.addToCart("goCart"))}," 立即購買 ")):(0,a.kq)("",!0)])])])):(0,a.kq)("",!0)])])])}i(7658);var V=i(183),I=i(6486),L=i.n(I),U={components:{AddMinBtn:V.Z},data(){return{product:{imageUrl:[]},isShow:!1,isLoading:!1,unitAry:[],cartQty:null,qty:1}},methods:{add(){this.qty++,this.qty>999&&(this.qty=999)},min(){this.qty--,this.qty<=1&&(this.qty=1)},pushVal(t){this.qty=t},addToCart:L().debounce((async function(t){const s=999-this.cartQty;if(0===s)return void this.$store.dispatch("fireToast",{title:"商品數量已達上限",style:"danger"});this.isLoading=!0;const i={product_id:this.product.id,qty:this.qty};try{const s=await this.$store.dispatch("Cart/addCart",i),a=s.data.data.product.title;this.$store.dispatch("Cart/getCart"),this.$store.dispatch("fireToast",{title:`「${a}」已加入購物車`,style:"success"}),this.$store.dispatch("Cart/setShake"),this.isLoading=!1,"goCart"===t&&this.$router.push({path:"/cart"})}catch(a){throw new Error(a)}}),500),async getProduct(){try{const{id:t}=this.$route.params,s=await this.$store.dispatch("Products/getSingleProduct",t);this.product=s.data.product,this.unitAry=this.product.unit.split("、"),this.isShow=!0,this.$store.dispatch("Products/setLoading",!1)}catch(t){throw new Error(t)}},changPic(t){let s=t.target.getAttribute("src"),i=this.$refs.pic1.getAttribute("src");t.target.setAttribute("src",i),this.$refs.pic1.setAttribute("src",s)},async getCart(){try{const t=await this.$store.dispatch("Cart/getCart"),{id:s}=this.$route.params,i=t.data.data.carts,[a]=i.filter((t=>t.product.id===s));this.cartQty=a?.qty||0}catch(t){throw new Error(t)}}},created(){this.getProduct(),this.getCart()}},E=i(3744);const M=(0,E.Z)(U,[["render",z],["__scopeId","data-v-0102bee2"]]);var Q=M},7923:function(t,s,i){t.exports=i.p+"img/load.c8fc3381.gif"}}]);
//# sourceMappingURL=633.b4da562c.js.map