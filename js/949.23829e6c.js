"use strict";(self["webpackChunkog_coffee"]=self["webpackChunkog_coffee"]||[]).push([[949],{1085:function(t,e,a){a.d(e,{Z:function(){return w}});var l=a(6252),s=a(3577);const o={id:"delProductModal",ref:"modal",class:"modal scale-in-center",tabindex:"-1","aria-labelledby":"delProductModalLabel","aria-hidden":"true"},i={class:"modal-dialog modal-dialog-centered"},d={class:"modal-content border-0"},r={class:"modal-header bg-danger text-white"},c={id:"delProductModalLabel",class:"modal-title"},n={class:"modal-body"},u={class:"text-danger"},p={class:"modal-footer"},b=(0,l._)("button",{type:"button",class:"btn btn-outline-primary","data-bs-dismiss":"modal"}," 取消 ",-1);function m(t,e,a,m,g,h){return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",i,[(0,l._)("div",d,[(0,l._)("div",r,[(0,l._)("h5",c,[(0,l._)("span",null,"刪除"+(0,s.zw)(a.title),1)]),(0,l._)("button",{type:"button",class:"btn-close bg-gray me-1","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=(...e)=>t.handClass&&t.handClass(...e))})]),(0,l._)("div",n,[(0,l.Uk)(" 是否刪除 "),(0,l._)("strong",u,(0,s.zw)(a.item.title),1),(0,l.Uk)(" "+(0,s.zw)(a.title)+"(刪除後將無法恢復)。 ",1)]),(0,l._)("div",p,[b,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:e[1]||(e[1]=e=>t.$emit("del-item",this.item.title))}," 確認刪除 ")])])])],512)}var g=a(1339),h={props:{item:Object,title:String},mixins:[g.Z],emits:["del-item"]},_=a(3744);const f=(0,_.Z)(h,[["render",m]]);var w=f},9103:function(t,e,a){a.d(e,{Z:function(){return f}});var l=a(6252),s=a(9963),o=a(3577);const i={"aria-label":"Page navigation example"},d={class:"pagination justify-content-center align-items-center"},r=["disabled"],c=["onClick"],n={key:0,class:"page-item disabled mx-1"},u=(0,l._)("a",{href:"#",class:"bg-gray text-white page-link rounded-1"},"1",-1),p=[u],b=["disabled"];function m(t,e,a,u,m,g){return(0,l.wg)(),(0,l.iD)("nav",i,[(0,l._)("ul",d,[(0,l._)("li",null,[(0,l._)("button",{type:"button",class:"btn text-primary bg-transparent border-0",disabled:!a.pages.has_pre,onClick:e[0]||(e[0]=(0,s.iM)((t=>g.updatePage(a.pages.current_page-1)),["prevent"]))},[(0,l._)("i",{class:(0,o.C_)(["bi bi-chevron-double-left fs-5",{"text-white opacity-75":!a.pages.has_pre}])},null,2)],8,r)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(g.pageAry,(t=>((0,l.wg)(),(0,l.iD)("li",{class:(0,o.C_)(["page-item mx-1",{active:t===a.pages.current_page}]),key:t+"452"},[(0,l._)("a",{class:"page-link rounded-1",href:"#",onClick:(0,s.iM)((e=>g.updatePage(t)),["prevent"])},(0,o.zw)(t),9,c)],2)))),128)),a.pages.current_page?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("li",n,p)),(0,l._)("li",null,[(0,l._)("button",{type:"button",class:"btn text-primary bg-transparent border-0",disabled:!a.pages.has_next,onClick:e[1]||(e[1]=(0,s.iM)((t=>g.updatePage(a.pages.current_page+1)),["prevent"]))},[(0,l._)("i",{class:(0,o.C_)(["bi bi-chevron-double-right fs-5",{"text-white opacity-75":!a.pages.has_next}])},null,2)],8,b)])])])}a(7658);var g={props:["pages"],methods:{updatePage(t){"search"===this.pages.category?this.$emit("searchPages",t):this.$emit("emitPages",t,this.pages.category)}},computed:{pageAry(){const t=Math.abs(9*(Math.ceil(this.pages.current_page/9)-1)+1),e=[];for(let a=t;a<this.pages.total_pages+1;a++)e.push(a);return e}}},h=a(3744);const _=(0,h.Z)(g,[["render",m]]);var f=_},949:function(t,e,a){a.r(e),a.d(e,{default:function(){return Ce}});var l=a(6252),s=a(3577),o=a(9963),i=a(7923);const d=t=>((0,l.dD)("data-v-0735ca06"),t=t(),(0,l.Cn)(),t),r={class:"container py-3"},c=d((()=>(0,l._)("h2",null,"產品列表",-1))),n={class:"row mt-4"},u={class:"col-12 d-flex align-items-center justify-content-between mb-2 mb-lg-0"},p={class:"bg-white p-2 rounded text-dark"},b={key:0,class:"me-3 ms-auto"},m=d((()=>(0,l._)("img",{class:"loading",src:i,alt:""},null,-1))),g=[m],h={class:"col-12"},_={class:"card overflow-auto flex-nowrap mt-2 px-3"},f={class:"table mt-4 table-hover"},w=d((()=>(0,l._)("thead",null,[(0,l._)("tr",{class:"table-light"},[(0,l._)("th",{width:"120",class:"text-nowrap pe-lg-3 pe-1"},"分類"),(0,l._)("th",{width:"150",class:"text-center text-nowrap px-5"},"預覽"),(0,l._)("th",{class:"text-center text-nowrap px-3"},"產品名稱"),(0,l._)("th",{width:"120",class:"text-end text-nowrap d-none d-lg-table-cell ps-5"}," 原價 "),(0,l._)("th",{width:"120",class:"text-center text-lg-end text-nowrap pe-lg-2 px-3"}," 售價 "),(0,l._)("th",{width:"145",class:"text-center d-none d-lg-table-cell text-nowrap px-3"}," 是否啟用 "),(0,l._)("th",{width:"160",class:"text-center text-nowrap"},"編輯")])],-1))),v={class:"text-nowrap"},y={class:"text-center"},P={class:"position-relative d-inline-block overflow-hidden"},x={key:0,class:"position-absolute sellOutTag bg-danger"},k={class:"pre-pic img-thumbnail",alt:"縮圖"},M={class:"text-break text-break"},D={class:"text-end d-none d-lg-table-cell text-break"},C={class:"text-lg-end text-center text-break"},$={class:"d-none d-lg-table-cell"},U={class:"ps-4"},L={class:"form-check d-flex justify-content-start"},T=["id","onUpdate:modelValue","onChange"],z=["for"],N={key:0,class:"text-primary text-nowrap"},V={key:1,class:"text-gray-dark text-nowrap"},Z={class:"text-center"},q={class:"btn-group"},I=["onClick"],A=d((()=>(0,l._)("span",{class:"d-lg-block d-none text-nowrap"},"編輯",-1))),F=d((()=>(0,l._)("i",{class:"bi bi-pencil-square d-lg-none"},null,-1))),H=[A,F],S=["onClick"],Y=d((()=>(0,l._)("span",{class:"d-lg-block d-none text-nowrap"},"刪除",-1))),O=d((()=>(0,l._)("i",{class:"bi bi-x-lg d-lg-none"},null,-1))),j=[Y,O],E={key:0,class:"text-center"},K=d((()=>(0,l._)("td",{colspan:"7",class:"fs-3 text-gray py-4"},"產品列表已空",-1))),W=[K];function B(t,e,a,i,d,m){const A=(0,l.up)("Pagination"),F=(0,l.up)("DelModal"),Y=(0,l.up)("ProductModifyModal"),O=(0,l.Q2)("src");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",r,[c,(0,l._)("div",n,[(0,l._)("div",u,[(0,l._)("div",p,[(0,l._)("strong",null," 產品總數: "+(0,s.zw)(m.allProduct.length),1)]),d.isLoading?((0,l.wg)(),(0,l.iD)("div",b,g)):(0,l.kq)("",!0),(0,l._)("button",{class:"btn btn-primary",type:"button",onClick:e[0]||(e[0]=t=>m.openModal(!0))}," 建立新的產品 ")]),(0,l._)("div",h,[(0,l._)("div",_,[(0,l._)("table",f,[w,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(m.products,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id,class:(0,s.C_)(["align-middle",{"text-secondary":!t.is_enabled}])},[(0,l._)("td",v,(0,s.zw)(t.category),1),(0,l._)("td",y,[(0,l._)("div",P,[t.is_soldOut?((0,l.wg)(),(0,l.iD)("div",x)):(0,l.kq)("",!0),(0,l.wy)((0,l._)("img",k,null,512),[[O,void 0===t.imageUrl?"":t.imageUrl[0]]])])]),(0,l._)("td",M,(0,s.zw)(t.title),1),(0,l._)("td",D,(0,s.zw)(t.origin_price),1),(0,l._)("td",C,(0,s.zw)(t.price),1),(0,l._)("td",$,[(0,l._)("div",U,[(0,l._)("div",L,[(0,l.wy)((0,l._)("input",{class:"form-check-input me-2",type:"checkbox",id:`productSwitch${t.id}`,"onUpdate:modelValue":e=>t.is_enabled=e,onChange:e=>m.updateProduct({product:t,isNew:!1})},null,40,T),[[o.e8,t.is_enabled]]),(0,l._)("label",{class:"form-check-label",for:`productSwitch${t.id}`},[t.is_enabled?((0,l.wg)(),(0,l.iD)("span",N,"啟用")):((0,l.wg)(),(0,l.iD)("span",V,"未啟用"))],8,z)])])]),(0,l._)("td",Z,[(0,l._)("div",q,[(0,l._)("button",{type:"button",class:"btn btn-primary btn-sm",onClick:e=>m.openModal(!1,t)},H,8,I),(0,l._)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>m.openDelModal(t)},j,8,S)])])],2)))),128))]),0===m.products.length?((0,l.wg)(),(0,l.iD)("tbody",E,W)):(0,l.kq)("",!0)])])])])]),(0,l.Wm)(A,{class:"mt-3 pb-5",pages:m.pagination,onEmitPages:m.getProducts},null,8,["pages","onEmitPages"]),(0,l.Wm)(F,{item:d.tempProduct,title:d.title,ref:"delModal",onDelItem:m.delProduct},null,8,["item","title","onDelItem"]),(0,l.Wm)(Y,{onUpdateProduct:m.updateProduct,product:d.tempProduct,isNew:d.isNew,ref:"productModal"},null,8,["onUpdateProduct","product","isNew"])],64)}var Q=a(9103),G=a(1085);const J=t=>((0,l.dD)("data-v-2861b886"),t=t(),(0,l.Cn)(),t),R={id:"productModifyModal",ref:"modal",class:"modal scale-in-center",tabindex:"-1"},X={class:"modal-dialog modal-dialog-centered modal-xl modal-dialog-scrollable text-start"},tt={class:"modal-content border-0"},et={class:"modal-header bg-dark text-white"},at={id:"productModalLabel",class:"modal-title"},lt={key:0},st={key:1},ot=J((()=>(0,l._)("button",{type:"button",class:"btn-close bg-gray me-1","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),it={class:"modal-body px-5"},dt=J((()=>(0,l._)("ul",{class:"nav nav-tabs",id:"myTab",role:"tablist"},[(0,l._)("li",{class:"nav-item",role:"presentation"},[(0,l._)("button",{class:"nav-link active",id:"home-tab","data-bs-toggle":"tab","data-bs-target":"#home",type:"button",role:"tab","aria-controls":"home","aria-selected":"true"}," 圖片添加 ")]),(0,l._)("li",{class:"nav-item",role:"presentation"},[(0,l._)("button",{class:"nav-link",id:"profile-tab","data-bs-toggle":"tab","data-bs-target":"#addPic",type:"button",role:"tab","aria-controls":"profile","aria-selected":"false"}," 基本資料 ")])],-1))),rt={class:"tab-content",id:"myTabContent"},ct={class:"tab-pane fade show active",id:"home",role:"tabpanel","aria-labelledby":"home-tab"},nt={class:"container mt-3"},ut={class:"row"},pt={class:"col-lg-6 col-12 pb-3 pb-lg-0 border-set"},bt={class:"mb-3"},mt=J((()=>(0,l._)("label",{for:"imageUrl",class:"fw-bold form-label mb-2"},"輸入圖片網址",-1))),gt={key:0,class:"ms-3 d-inline-block"},ht=J((()=>(0,l._)("img",{class:"loading",src:i,alt:""},null,-1))),_t=[ht],ft={class:"mb-5"},wt=J((()=>(0,l._)("label",{for:"customFile",class:"fw-bold form-label mb-2"},"或上傳圖片取得圖片連結 ",-1))),vt={class:"col-lg-6 col-12 mt-3 mt-lg-0"},yt={class:"mb-1"},Pt={class:"position-relative"},xt=["src"],kt=["data-idx"],Mt={class:"tab-pane fade",id:"addPic",role:"tabpanel","aria-labelledby":"profile-tab"},Dt={class:"container mt-3"},Ct={class:"mb-3"},$t=J((()=>(0,l._)("label",{for:"title",class:"form-label fw-bold"},"標題",-1))),Ut={class:"mb-3"},Lt=J((()=>(0,l._)("label",{for:"subtitle",class:"form-label fw-bold"},"副標題",-1))),Tt={class:"row"},zt={class:"mb-3 col-md-6"},Nt=J((()=>(0,l._)("label",{for:"category",class:"form-label fw-bold"},"分類",-1))),Vt=J((()=>(0,l._)("option",{value:"飲品",selected:""},"飲品",-1))),Zt=J((()=>(0,l._)("option",{value:"點心"},"點心",-1))),qt=J((()=>(0,l._)("option",{value:"餐點"},"餐點",-1))),It=[Vt,Zt,qt],At={class:"mb-3 col-md-6"},Ft=J((()=>(0,l._)("label",{for:"category",class:"form-label fw-bold"},"子分類",-1))),Ht=J((()=>(0,l._)("option",{value:"冷飲"},"冷飲",-1))),St=J((()=>(0,l._)("option",{value:"熱飲"},"熱飲",-1))),Yt=J((()=>(0,l._)("option",{value:"漂浮系列"},"漂浮系列",-1))),Ot=J((()=>(0,l._)("option",{value:"甜點"},"甜點",-1))),jt=J((()=>(0,l._)("option",{value:"麵包"},"麵包",-1))),Et=J((()=>(0,l._)("option",{value:"餐前"},"餐前",-1))),Kt=J((()=>(0,l._)("option",{value:"主食"},"主食",-1))),Wt={class:"row"},Bt={class:"mb-3 col-md-6"},Qt=J((()=>(0,l._)("label",{for:"discount",class:"form-label fw-bold"},"折扣",-1))),Gt=(0,l.uE)('<option value="1" data-v-2861b886>原價</option><option value="0.9" data-v-2861b886>九折</option><option value="0.8" data-v-2861b886>八折</option><option value="0.7" data-v-2861b886>七折</option><option value="0.6" data-v-2861b886>六折</option>',5),Jt=[Gt],Rt={class:"mb-3 col-md-6"},Xt=J((()=>(0,l._)("label",{class:"form-label fw-bold"},"單位",-1))),te={class:"row"},ee={class:"mb-3 col-md-6"},ae=J((()=>(0,l._)("label",{for:"origin_price",class:"form-label fw-bold"},"原價",-1))),le={class:"mb-3 col-md-6"},se=J((()=>(0,l._)("label",{for:"price",class:"form-label fw-bold"},"售價",-1))),oe=J((()=>(0,l._)("hr",null,null,-1))),ie={class:"mb-3"},de=J((()=>(0,l._)("label",{for:"description",class:"form-label fw-bold"},"產品描述",-1))),re={class:"mb-3"},ce=J((()=>(0,l._)("label",{for:"content",class:"form-label fw-bold"},"說明內容",-1))),ne={class:"mb-3"},ue={class:"form-check"},pe=J((()=>(0,l._)("label",{class:"form-check-label fw-bold",for:"is_enabled"},"是否啟用",-1))),be={class:"form-check"},me=J((()=>(0,l._)("label",{class:"form-check-label fw-bold",for:"is_enabled"},"售完",-1))),ge={class:"modal-footer"},he=J((()=>(0,l._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1)));function _e(t,e,a,i,d,r){return(0,l.wg)(),(0,l.iD)("div",R,[(0,l._)("div",X,[(0,l._)("div",tt,[(0,l._)("div",et,[(0,l._)("h5",at,[a.isNew?((0,l.wg)(),(0,l.iD)("span",lt,"新增產品")):((0,l.wg)(),(0,l.iD)("span",st,"編輯產品"))]),ot]),(0,l._)("div",it,[dt,(0,l._)("div",rt,[(0,l._)("div",ct,[(0,l._)("div",nt,[(0,l._)("div",ut,[(0,l._)("div",pt,[(0,l._)("div",bt,[mt,d.isLoading?((0,l.wg)(),(0,l.iD)("div",gt,_t)):(0,l.kq)("",!0),(0,l._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結",onInput:e[0]||(e[0]=t=>r.pushPic(t)),ref:"fileUrl"},null,544)]),(0,l._)("div",ft,[wt,(0,l._)("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[1]||(e[1]=(...t)=>r.uploadFile&&r.uploadFile(...t))},null,544)])]),(0,l._)("div",vt,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.tempProduct.imageUrl,((t,a)=>((0,l.wg)(),(0,l.iD)("div",{class:"mb-4",key:a+"21345"},[(0,l._)("h6",yt,"圖片"+(0,s.zw)(a+1),1),(0,l._)("div",Pt,[(0,l._)("img",{class:"img-fluid img-thumbnail",src:t,alt:""},null,8,xt),(0,l._)("button",{type:"button","data-idx":a,class:"btn-close bg-white p-2 position-absolute top-0 start-0 mt-3 ms-3","aria-label":"Close",onClick:e[2]||(e[2]=t=>r.removePic(t))},null,8,kt)])])))),128))])])])]),(0,l._)("div",Mt,[(0,l._)("div",Dt,[(0,l._)("div",Ct,[$t,(0,l.wy)((0,l._)("input",{id:"title",type:"text",class:"form-control","onUpdate:modelValue":e[3]||(e[3]=t=>d.tempProduct.title=t),placeholder:"請輸入標題"},null,512),[[o.nr,d.tempProduct.title]])]),(0,l._)("div",Ut,[Lt,(0,l.wy)((0,l._)("input",{id:"subtitle",type:"text",class:"form-control","onUpdate:modelValue":e[4]||(e[4]=t=>d.tempProduct.subtitle=t),placeholder:"請輸入副標題"},null,512),[[o.nr,d.tempProduct.subtitle]])]),(0,l._)("div",Tt,[(0,l._)("div",zt,[Nt,(0,l.wy)((0,l._)("select",{id:"category",class:"form-select","onUpdate:modelValue":e[5]||(e[5]=t=>d.tempProduct.category=t),onChange:e[6]||(e[6]=(...t)=>r.handTempProduct&&r.handTempProduct(...t)),"aria-label":"category select"},It,544),[[o.bM,d.tempProduct.category]])]),(0,l._)("div",At,[Ft,(0,l.wy)((0,l._)("select",{id:"category",class:"form-select","onUpdate:modelValue":e[7]||(e[7]=t=>d.tempProduct.sub_category=t),"aria-label":"category select"},["飲品"===this.tempProduct.category?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[Ht,St,Yt],64)):(0,l.kq)("",!0),"點心"===this.tempProduct.category?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[Ot,jt],64)):(0,l.kq)("",!0),"餐點"===this.tempProduct.category?((0,l.wg)(),(0,l.iD)(l.HY,{key:2},[Et,Kt],64)):(0,l.kq)("",!0)],512),[[o.bM,d.tempProduct.sub_category]])])]),(0,l._)("div",Wt,[(0,l._)("div",Bt,[Qt,(0,l.wy)((0,l._)("select",{id:"discount",class:"form-select","onUpdate:modelValue":e[8]||(e[8]=t=>d.tempProduct.discount=t),onChange:e[9]||(e[9]=(...t)=>r.handTempProduct&&r.handTempProduct(...t)),"aria-label":"category select"},Jt,544),[[o.bM,d.tempProduct.discount,void 0,{number:!0}]])]),(0,l._)("div",Rt,[Xt,(0,l._)("p",null,(0,s.zw)(r.unitSet),1)])]),(0,l._)("div",te,[(0,l._)("div",ee,[ae,(0,l.wy)((0,l._)("input",{id:"price",type:"number",min:"0",class:"form-control",onInput:e[10]||(e[10]=(...t)=>r.handTempProduct&&r.handTempProduct(...t)),"onUpdate:modelValue":e[11]||(e[11]=t=>d.tempProduct.origin_price=t),placeholder:"請輸入售價"},null,544),[[o.nr,d.tempProduct.origin_price,void 0,{number:!0}]])]),(0,l._)("div",le,[se,(0,l._)("p",null,(0,s.zw)(r.price||0),1)])]),oe,(0,l._)("div",ie,[de,(0,l.wy)((0,l._)("textarea",{id:"description",type:"text",class:"form-control","onUpdate:modelValue":e[12]||(e[12]=t=>d.tempProduct.description=t),placeholder:"請輸入產品描述"},"\r\n                  ",512),[[o.nr,d.tempProduct.description]])]),(0,l._)("div",re,[ce,(0,l.wy)((0,l._)("textarea",{id:"description",type:"text",class:"form-control","onUpdate:modelValue":e[13]||(e[13]=t=>d.tempProduct.content=t),placeholder:"請輸入說明內容"},"\r\n                  ",512),[[o.nr,d.tempProduct.content]])]),(0,l._)("div",ne,[(0,l._)("div",ue,[(0,l.wy)((0,l._)("input",{id:"is_enabled",class:"form-check-input","onUpdate:modelValue":e[14]||(e[14]=t=>d.tempProduct.is_enabled=t),type:"checkbox","true-value":!0,"false-value":!1},null,512),[[o.e8,d.tempProduct.is_enabled]]),pe]),(0,l._)("div",be,[(0,l.wy)((0,l._)("input",{id:"is_enabled",class:"form-check-input","onUpdate:modelValue":e[15]||(e[15]=t=>d.tempProduct.is_soldOut=t),type:"checkbox","true-value":!0,"false-value":!1},null,512),[[o.e8,d.tempProduct.is_soldOut]]),me])])])])])]),(0,l._)("div",ge,[he,(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:e[16]||(e[16]=e=>t.$emit("update-product",{product:d.tempProduct,isNew:a.isNew}))},(0,s.zw)(a.isNew?"新增產品":"更新產品"),1)])])])],512)}a(7658);var fe=a(1339),we=a(6486),ve=a.n(we),ye={props:{product:{type:Object,default(){return{}}},isNew:{type:Boolean,default:!0}},emits:["update-product"],data(){return{status:{},tempProduct:{imageUrl:[]},isBtnShow:!1,isLoading:!1}},mixins:[fe.Z],watch:{product(){this.tempProduct=this.product,this.tempProduct.imageUrl||(this.tempProduct.imageUrl=[])}},methods:{async uploadFile(){try{this.isLoading=!0;const t=this.$refs.fileInput.files[0],e=new FormData;e.append("file-to-upload",t);const a=await this.$store.dispatch("Products/upLoadFile",e);this.tempProduct.imageUrl.push(a.data.imageUrl),this.isLoading=!1,this.$refs.fileUrl.value=null,this.$refs.fileInput.value=null}catch(t){this.$store.dispatch("fireToast",{res:t.response})}},pushPic:ve().debounce((function(t){const e=t.target.value.trim();this.tempProduct.imageUrl.push(e)}),700),removePic(t){const e=t.target.getAttribute("data-idx");this.tempProduct.imageUrl.splice(e,1)},handTempProduct(){this.tempProduct.unit=this.unitSet,this.tempProduct.price=this.price}},computed:{unitSet(){let t=null;switch(this.tempProduct.category){case"飲品":t="杯";break;case"點心":t="個";break;case"餐點":t="份";break}return t},price(){return Math.floor(this.tempProduct.origin_price*this.tempProduct.discount)}}},Pe=a(3744);const xe=(0,Pe.Z)(ye,[["render",_e],["__scopeId","data-v-2861b886"]]);var ke=xe,Me={data(){return{isNew:!1,tempProduct:{imagesUrl:[]},currentPage:1,isLoading:!1,title:"產品"}},components:{Pagination:Q.Z,DelModal:G.Z,ProductModifyModal:ke},methods:{openDelModal(t){this.tempProduct={...t};const e=this.$refs.delModal;e.openModal()},openModal(t,e){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct={...e},this.isNew=!1);const a=this.$refs.productModal;a.openModal()},async getProducts(t=1){try{await this.$store.dispatch("Products/getProducts",t),this.$store.dispatch("handLoading",!1)}catch(e){throw this.$store.dispatch("handLoading",!1),new Error(e)}},async getAllProducts(){try{await this.$store.dispatch("Products/getAllProducts")}catch(t){throw new Error(t)}},updateProduct:ve().debounce((async function({product:t,isNew:e}){this.isLoading=!0;const a=this.$refs.productModal;try{let l=null;if(e)l=await this.$store.dispatch("Products/addProduct",t);else{const e={id:t.id,product:t};l=await this.$store.dispatch("Products/modifyProduct",e)}a.hideModal(),this.getAllProducts(),this.$store.dispatch("fireToast",{res:l}),this.getProducts(this.currentPage),this.isLoading=!1}catch(l){this.isLoading=!1,this.$store.dispatch("fireToast",{res:l.response})}}),1e3),delProduct:ve().debounce((async function(t){try{this.isLoading=!0,await this.$store.dispatch("Products/delProduct",this.tempProduct.id);const e=this.$refs.delModal;e.hideModal(),this.$store.dispatch("fireToast",{title:`「${t}」產品已刪除`,style:"success"}),this.getProducts(this.currentPage),this.getAllProducts(),this.isLoading=!1}catch(e){this.$store.dispatch("fireToast",{res:e.response})}}),500)},created(){this.getProducts(),this.getAllProducts(),this.$store.dispatch("handLoading",!0)},computed:{products(){return this.$store.getters["Products/productsData"]},pagination(){return this.$store.getters["Products/productsPage"]},allProduct(){return this.$store.getters["Products/allProductsData"]}}};const De=(0,Pe.Z)(Me,[["render",B],["__scopeId","data-v-0735ca06"]]);var Ce=De},7923:function(t,e,a){t.exports=a.p+"img/load.c8fc3381.gif"}}]);
//# sourceMappingURL=949.23829e6c.js.map