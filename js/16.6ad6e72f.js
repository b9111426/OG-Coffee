"use strict";(self["webpackChunkog_coffee"]=self["webpackChunkog_coffee"]||[]).push([[16],{4016:function(t,e,s){s.r(e),s.d(e,{default:function(){return G}});var r=s(6252),a=s(9963),o=s(3577),c=s(7923);const i=t=>((0,r.dD)("data-v-12691d6f"),t=t(),(0,r.Cn)(),t),d={class:"container mt-4"},l={class:"row"},n={class:"col-lg-3 col-12 py-2"},u={class:"input-group mb-3"},h=i((()=>(0,r._)("i",{class:"bi bi-search"},null,-1))),g=[h],b={class:"d-none d-lg-block"},p={class:"border-bottom py-2 border-gray-dark position-relative select-none"},y={key:0,class:"loading2 position-absolute end-0 top-50 me-5 translate-middle",src:c,alt:""},m=["href"],_=["data-category"],w=i((()=>(0,r._)("i",{class:"bi bi-caret-left-fill"},null,-1))),f=["id"],P=["data-sub_category","data-category"],v={class:"d-lg-none d-block"},k=["value"],C={class:"col-lg-9 col-12 py-2"},$={class:"d-flex align-items-center justify-content-start mb-3"},S={"aria-label":"breadcrumb"},D={class:"breadcrumb select-none",ref:"breadcrumb"},L={class:"breadcrumb-item"},x={key:0,class:"breadcrumb-item"},z={key:1,class:"breadcrumb-item"},j={class:"breadcrumb-item"},R=["data-category"],N={class:"breadcrumb-item"},T={class:"text-primary select-none"},F=i((()=>(0,r._)("i",{class:"bi bi-chevron-down ps-1"},null,-1))),H={class:"text-primary select-none"},K=i((()=>(0,r._)("i",{class:"bi bi-chevron-up ps-1"},null,-1))),U={class:"row row-cols-1 position-relative"},Y={key:0,class:"position-absolute top-50 start-50 translate-middle my-5"},A=i((()=>(0,r._)("img",{class:"loading",src:c,alt:""},null,-1))),q=[A];function E(t,e,s,c,i,h){const A=(0,r.up)("router-view");return(0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",l,[(0,r._)("div",n,[(0,r._)("div",u,[(0,r.wy)((0,r._)("input",{type:"text",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>i.searchName=t),onKeyup:e[1]||(e[1]=(0,a.D2)(((...t)=>h.searchProduct&&h.searchProduct(...t)),["enter"])),"aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,544),[[a.nr,i.searchName]]),(0,r._)("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:e[2]||(e[2]=(...t)=>h.searchProduct&&h.searchProduct(...t))},g)]),(0,r._)("div",b,[(0,r._)("p",p,[(0,r.Uk)(" 分類 "),(0,r._)("span",null,[i.isLoading2?((0,r.wg)(),(0,r.iD)("img",y)):(0,r.kq)("",!0)])]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.categoryList,((t,s)=>((0,r.wg)(),(0,r.iD)("div",{class:"p-3",key:s+5678},[(0,r._)("a",{class:"collapsed fw-bold select-none","data-bs-toggle":"collapse",href:`#collapse${s}`},[(0,r._)("div",{class:"d-flex justify-content-between bg-gray",onClick:e[3]||(e[3]=t=>h.renderCategory(t)),"data-category":t.category},[(0,r._)("span",null,(0,o.zw)(t.category),1),(0,r._)("span",null,(0,o.zw)(t.num),1),w],8,_)],8,m),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.sub_category,(a=>((0,r.wg)(),(0,r.iD)("div",{key:a,class:"collapse text-start text-primary",id:`collapse${s}`},[(0,r._)("a",{href:"javascript:;",class:"d-flex justify-content-between ms-2 select-none",onClick:e[4]||(e[4]=t=>h.renderSubCategory(t)),"data-sub_category":a.category,"data-category":t.category},[(0,r._)("span",null,(0,o.zw)(a.category),1),(0,r._)("span",null,(0,o.zw)(a.num),1)],8,P)],8,f)))),128))])))),128))]),(0,r._)("div",v,[(0,r._)("select",{class:"form-select",onChange:e[5]||(e[5]=t=>h.selectCategory(t)),"aria-label":"select category"},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(h.categoryList,((t,e)=>((0,r.wg)(),(0,r.iD)("option",{value:t.category,key:e+5678},(0,o.zw)(t.category),9,k)))),128))],32)])]),(0,r._)("div",C,[(0,r._)("div",$,[(0,r._)("nav",S,[(0,r._)("ol",D,[(0,r._)("li",L,[(0,r._)("a",{href:"javascript:;",onClick:e[6]||(e[6]=(...t)=>h.setAllProducts&&h.setAllProducts(...t))}," 全部商品 ")]),0===i.breadcrumb.length?((0,r.wg)(),(0,r.iD)("li",x)):1===i.breadcrumb.length?((0,r.wg)(),(0,r.iD)("li",z,(0,o.zw)(i.breadcrumb[0]),1)):((0,r.wg)(),(0,r.iD)(r.HY,{key:2},[(0,r._)("li",j,[(0,r._)("a",{href:"javascript:;",onClick:e[7]||(e[7]=t=>h.renderCategory(t)),"data-category":i.breadcrumb[0]},(0,o.zw)(i.breadcrumb[0]),9,R)]),(0,r._)("li",N,(0,o.zw)(i.breadcrumb[1]),1)],64))],512)]),(0,r.wy)((0,r._)("a",{href:"javascript:;",class:"ms-5 link-dark border-bottom border-primary ms-auto",onClick:e[8]||(e[8]=(...t)=>h.switchSort&&h.switchSort(...t))},[(0,r.wy)((0,r._)("span",T,[(0,r.Uk)("價格由高至低"),F],512),[[a.F8,!i.sortRise]]),(0,r.wy)((0,r._)("span",H,[(0,r.Uk)("價格由低至高"),K],512),[[a.F8,i.sortRise]])],512),[[a.F8,h.sortState]])]),(0,r._)("div",U,[h.isLoading?((0,r.wg)(),(0,r.iD)("div",Y,q)):(0,r.kq)("",!0),(0,r.Wm)(A)])])])])}s(7658);var I=s(6486),V=s.n(I),W={data(){return{isLoading2:!1,sortRise:!1,searchName:"",breadcrumb:[]}},created(){this.getProducts(1,this.firstCategory),this.breadcrumb.push(this.firstCategory),this.$store.dispatch("handLoading",!0)},methods:{toggleLoading(t){this.isLoading=t},getProducts:V().debounce((async function(t=1,e){try{this.isLoading2=!0;const s={page:t,category:e};await this.$store.dispatch("Products/getFrontProducts",s),this.$store.dispatch("Products/setTempProduct",e),this.isLoading2=!1,this.$store.dispatch("handLoading",!1),this.$router.push("/products")}catch(s){throw this.$store.dispatch("handLoading",!1),new Error(s)}}),500),renderCategory(t){const e=t.currentTarget.dataset.category;this.breadcrumb=[],this.breadcrumb.push(e),this.$store.dispatch("Products/setTempProduct",e),this.getProducts(1,e),this.$store.dispatch("Products/setSortState",!0)},selectCategory(t){const e=t.target.value;this.breadcrumb=[],this.breadcrumb.push(e),this.$store.dispatch("Products/setTempProduct",e),this.getProducts(1,e),this.$store.dispatch("Products/setSortState",!0)},searchProduct(){""!==this.searchName.trim()&&(this.$store.dispatch("Products/searchProduct",this.searchName),this.$router.push("/products"),this.searchName="",this.breadcrumb=[])},setAllProducts:V().debounce((function(){this.breadcrumb=[],this.getProducts(),this.$store.dispatch("Products/setSortState",!0)}),500),renderSubCategory(t){const e=t.currentTarget.dataset.sub_category,s=t.currentTarget.dataset.category;this.breadcrumb=[s,e],this.$store.dispatch("Products/searchSubCategory",e),this.$store.dispatch("Products/setSortState",!0),this.$router.push("/products")},switchSort(){this.sortRise=!this.sortRise,this.$store.dispatch("Products/switchSort",this.sortRise)}},computed:{isLoading(){return this.$store.getters["Products/loadingState"]},categoryList(){return this.$store.getters["Products/category"]},sortState(){return this.$store.getters["Products/sortState"]},firstCategory(){return this.$store.getters["Products/firstCategory"]}},watch:{firstCategory(t){this.getProducts(1,t)}}},Z=s(3744);const B=(0,Z.Z)(W,[["render",E],["__scopeId","data-v-12691d6f"]]);var G=B},7923:function(t,e,s){t.exports=s.p+"img/load.c8fc3381.gif"}}]);
//# sourceMappingURL=16.6ad6e72f.js.map